---
import { ui, defaultLang } from "../i18n/ui";

const { lang = "en" } = Astro.props;

function t(key: string) {
    let val: any = ui[lang];
    const parts = key.split(".");
    for (const part of parts) {
        if (val === undefined || val === null) break;
        val = val[part];
    }
    // Fallback
    if (val === undefined) {
        val = ui[defaultLang];
        for (const part of parts) {
            if (val === undefined || val === null) break;
            val = val[part];
        }
    }
    return val || key;
}
---

<footer id="main-footer">
    <div class="footer-links">
        <a href={`/${lang === "en" ? "about" : lang + "/about"}`}
            >{t("nav.about")}</a
        >
        <a href={`/${lang === "en" ? "privacy" : lang + "/privacy"}`}
            >{t("nav.privacy")}</a
        >
        <a href={`/${lang === "en" ? "terms" : lang + "/terms"}`}
            >{t("nav.terms")}</a
        >
        <a href={`/${lang === "en" ? "contact" : lang + "/contact"}`}
            >{t("nav.contact")}</a
        >
        <a href={`/${lang === "en" ? "dmca" : lang + "/dmca"}`}
            >{t("nav.dmca")}</a
        >
    </div>
    <p>{t("footer.rights")}</p>
</footer>
