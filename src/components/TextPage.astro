---
// استيراد المكونات الأساسية
import Layout from "../layouts/Layout.astro";
import Downloader from "../components/Downloader.jsx";
import { getTranslations, useTranslations } from "../utils/i18n";

// تعريف الخصائص (Props) التي يستقبلها المكون
interface Props {
    lang: string; // اللغة الحالية
    titleKey: string; // مفتاح عنوان الصفحة في ملف الترجمة
    contentKey: string; // مفتاح محتوى الصفحة في ملف الترجمة
    h1Color?: string; // (اختياري) لون العنوان، نحتاجه لصفحة Disclaimer
}

// استخراج الخصائص
const { lang, titleKey, contentKey, h1Color } = Astro.props;

// إعداد أدوات الترجمة
const t = useTranslations(lang);
const translations = getTranslations(lang);

// جلب النصوص الفعلية باستخدام المفاتيح
const title = t(titleKey);
const rawContent = t(contentKey);

// إعداد وصف الصفحة (Meta Description)
// نأخذ أول 150 حرف ونضيف ثلاث نقاط، مع التأكد من أن النص موجود أصلاً
const description = rawContent ? rawContent.substring(0, 150) + "..." : "";
---

<Layout lang={lang} title={title} description={description}>
    <article class="hero-section">
        <h1 style={h1Color ? `color: ${h1Color};` : ""}>
            {title}
        </h1>

        <p>{description}</p>

        <Downloader client:load messages={translations.downloader} />
    </article>

    <div class="container" style="padding: 2rem;">
        <article
            class="content-box"
            style="background: var(--glass); padding: 3rem; border-radius: 25px; border: 1px solid var(--border);"
        >
            <div style="white-space: pre-line; line-height: 1.8; opacity: 0.9;">
                {rawContent}

                <slot />
            </div>
        </article>
    </div>
</Layout>
