---
import DownloadPage from "../../components/DownloadPage.astro";
import { languages } from "../../i18n/ui";
import NotFound from "../../components/NotFound.astro";

const { lang } = Astro.params;
const isValidLang = lang && languages[lang as keyof typeof languages];

if (!isValidLang) {
    Astro.response.status = 404;
    Astro.response.statusText = "Not Found";
}

export function getStaticPaths() {
    return Object.keys(languages).map((lang) => ({ params: { lang } }));
}
---

{
    isValidLang ? (
        <DownloadPage
            lang={lang}
            pagePrefix="story_page"
            mode="story"
            showAd={true}
        />
    ) : (
        <NotFound />
    )
}
